<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scrolla</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/ai.css">
</head>
<body>
  <!-- Auth Modal -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Welcome to Scrolla</h2>
        <p>Stay informed with personalized news</p>
      </div>
      <div class="modal-body">
        <button class="btn btn-primary" id="loginBtnModal">Login</button>
        <button class="btn btn-secondary" id="registerBtnModal">Register</button>
        <button class="btn btn-ghost" id="guestBtnModal">Continue as Guest</button>
      </div>
    </div>
  </div>

  <!-- Location Permission Modal -->
  <div id="locationModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Enable Location</h2>
        <p>Get regional news based on your location</p>
      </div>
      <div class="modal-body">
        <button class="btn btn-primary" id="allowLocationBtn">Allow Location</button>
        <button class="btn btn-ghost" id="skipLocationBtn">Skip</button>
      </div>
    </div>
  </div>

  <!-- Main Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <img src="assets/Logo.png" alt="Logo" class="logo" onerror="this.style.display='none'">
        <span>Scrolla</span>
      </div>
      
      <div class="nav-links">
        <button class="nav-link active" data-tab="main">Home</button>
        <button class="nav-link" data-tab="national">National</button>
        <button class="nav-link" data-tab="international">International</button>
        <button class="nav-link" data-tab="regional">Regional</button>
        <button class="nav-link" data-tab="saved">Saved</button>
        <button class="nav-link" data-tab="for-you">For You</button>
      </div>

      <div class="nav-actions">
        <select id="categorySelect" class="category-select">
          <option value="all">All Categories</option>
          <option value="business">Business</option>
          <option value="technology">Technology</option>
          <option value="sports">Sports</option>
          <option value="entertainment">Entertainment</option>
          <option value="health">Health</option>
          <option value="science">Science</option>
        </select>

        <div id="authButton" class="auth-button">
          <button class="btn btn-primary" id="signInBtn">Sign In</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- News Feed Container -->
  <main class="feed-container">
    <div id="newsCards" class="news-cards"></div>
    
    <div class="loading-spinner hidden" id="loadingSpinner">
      <div class="spinner"></div>
      <p>Loading news...</p>
    </div>

    <div class="error-message hidden" id="errorMessage"></div>
    
    <div class="load-more-container hidden" id="loadMoreContainer">
      <button class="btn btn-primary" id="loadMoreBtn">Load More Articles</button>
    </div>
  </main>

  <!-- Summary Modal -->
  <div id="summaryModal" class="modal hidden">
    <div class="modal-content ai-modal">
      <div class="modal-header">
        <h3>Article Summary</h3>
        <button class="close-btn" id="closeSummaryBtn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="summary-loading">
          <div class="spinner"></div>
          <p>Generating summary...</p>
        </div>
        <div class="summary-content hidden"></div>
      </div>
    </div>
  </div>

  <!-- Ask AI Modal -->
  <div id="askAiModal" class="modal hidden">
    <div class="modal-content ai-modal">
      <div class="modal-header">
        <h3>Ask AI About This Article</h3>
        <button class="close-btn" id="closeAskAiBtn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="chat-container" id="chatContainer"></div>
        <div class="chat-input-container">
          <input 
            type="text" 
            id="aiQuestion" 
            placeholder="Ask a question about this article..."
            class="chat-input"
          >
          <button class="btn btn-primary" id="sendAiBtn">Send</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Load all scripts in correct order -->
  <script src="js/core/state.js"></script>
  <script src="js/core/utils.js"></script>
  <script src="js/core/api.js"></script>
  <script src="js/core/auth.js"></script>
  <script src="js/feed/feed.utils.js"></script>
  <script src="js/feed/feed.shared.js"></script>
  <script src="js/feed/feed.events.js"></script>
  <script src="js/feed/feed.render.js"></script>
  <script src="js/feed/feed.service.js"></script>
  <script src="js/ai/ai.summary.js"></script>
  <script src="js/ai/ai.chat.js"></script>
  <script src="js/saved/saved.service.js"></script>
  <script src="js/app.js"></script>
</body>
</html>